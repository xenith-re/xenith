<!-- Configuration file for a Xenith domain -->
<!-- This file was auto-generated by xenith-vm -->

<domain type='xen'>
  <name>{{ domain.name }}</name>
  <memory unit='MiB'>{{ domain.memory }}</memory>
  <currentMemory unit='MiB'>{{ domain.maximum_memory }}</currentMemory>
  <vcpu placement='static' current='{{ domain.virtual_cpus }}'>{{ domain.maximum_virtual_cpus }}</vcpu>
  <os>
    <type arch='x86_64' machine='xenfv'>{{ domain.type }}</type>
    <loader type='rom'>/usr/lib/xen/boot/hvmloader</loader>
    <smbios mode='sysinfo'/>
    <boot dev='hd'/>
    <boot dev='cdrom'/>
    <boot dev='network'/>
  </os>
  <features>
    <acpi/>
    <apic/>
    <pae/>
  </features>
  <cpu mode='host-passthrough'/>
  <clock offset='variable' adjustment='0' basis='utc'>
    <timer name='tsc' present='yes' mode='{{ domain.tsc_mode }}'/>
  </clock>
  <on_poweroff>{{ domain.domain_actions.on_poweroff }}</on_poweroff>
  <on_reboot>{{ domain.domain_actions.on_reboot }}</on_reboot>
  <on_crash>{{ domain.domain_actions.on_crash }}</on_crash>
  <devices>
    {{ disk_devices }}
    <!-- <disk type='file' device='disk'>
      <driver name='qemu' type='qcow2'/>
      <source file='/dev/sda'/>
      <target dev='xvda' bus='xen'/>
    </disk>
    <disk type='file' device='disk'>
      <driver name='qemu' type='raw'/>
      <source file='/dev/sdb'/>
      <target dev='xvdb' bus='xen'/>
      <readonly/>
    </disk> -->
    <controller type='xenbus' index='0'/>
    {% for interface in domain.network_interfaces %}
    <interface type='bridge'>
      <mac address='00:16:3e:00:00:00'/>
      <source bridge='xenbr0'/>
      <model type='rtl8139'/>
    </interface>
    {% endfor %}
    <!-- <interface type='bridge'>
      <mac address='00:16:3e:00:00:00'/>
      <source bridge='xenbr0'/>
      <model type='rtl8139'/>
    </interface>
    <interface type='bridge'>
      <mac address='00:16:3e:00:00:01'/>
      <source bridge='xenbr0'/>
      <model type='rtl8139'/>
    </interface> -->
    <input type='mouse' bus='ps2'/>
    <input type='keyboard' bus='ps2'/>
    <memballoon model='xen'/>
  </devices>
  <sysinfo type='smbios'>
    <bios>
      <entry name='vendor'>{{ domain.smbios.bios_vendor }}</entry>
    </bios>
    <system>
      <entry name='manufacturer'>{{ domain.smbios.system_manufacturer }}</entry>
      <entry name='product'>{{ domain.smbios.system_product_name }}</entry>
      <entry name='version'>{{ domain.smbios.system_version }}</entry>
    </system>
    <baseBoard>
      <entry name='manufacturer'>{{ domain.smbios.baseboard_manufacturer }}</entry>
      <entry name='product'>{{ domain.smbios.baseboard_product_name }}</entry>
      <entry name='version'>{{ domain.smbios.baseboard_version }}</entry>
      <entry name='serial'>{{ domain.smbios.baseboard_serial_number }}</entry>
    </baseBoard>
    <chassis>
      <entry name='manufacturer'>{{ domain.smbios.enclosure_manufacturer }}</entry>
      <entry name='version'>{{ domain.smbios.enclosure_version }}</entry>
      <entry name='serial'>{{ domain.smbios.enclosure_serial_number }}</entry>
      <entry name='asset'>{{ domain.smbios.enclosure_asset_tag }}</entry>
    </chassis>
    {% if domain.smbios.oems %}
    <oemStrings>
      {% for oem in domain.smbios.oems  %}
      <entry>{{ oem }}</entry>
      <!-- <entry>myappname:some arbitrary data</entry> -->
      <!-- <entry>otherappname:more arbitrary data</entry> -->
      {% endfor %}
    </oemStrings>
    {% endif %}
  </sysinfo>
</domain>
